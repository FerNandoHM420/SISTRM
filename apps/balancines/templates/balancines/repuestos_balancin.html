<!-- templates/app/inventario/repuestos_balancin.html -->
{% extends 'base.html' %}

{% block title %}Repuestos para Balancines - Sistema TRM{% endblock %}

{% block content %}
<div class="container-fluid px-4 py-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 fw-bold text-primary">
                <i class="fas fa-cogs"></i> Repuestos para Balancines
            </h1>
            <p class="text-muted mb-0">Gesti贸n de repuestos espec铆ficos para balancines</p>
        </div>
        <div>
            <a href="{% url 'inventario_principal' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver
            </a>
            <a href="{% url 'agregar_repuesto_balancin' %}" class="btn btn-primary">
                <i class="fas fa-plus"></i> Agregar Repuesto
            </a>
        </div>
    </div>

    <!-- Estad铆sticas -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <h5 class="card-title">Total Repuestos</h5>
                    <h2 class="mb-0">{{ total_repuestos }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <h5 class="card-title">Cantidad Total</h5>
                    <h2 class="mb-0">{{ total_cantidad }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-white">
                <div class="card-body text-center">
                    <h5 class="card-title">Stock Bajo</h5>
                    <h2 class="mb-0">{{ repuestos_bajo_stock.count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-danger text-white">
                <div class="card-body text-center">
                    <h5 class="card-title">Sin Stock</h5>
                    <h2 class="mb-0">{{ repuestos_sin_stock.count }}</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== PANEL DE HISTORIAL DE ACTIVIDADES ========== -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow border-0">
                <div class="card-header bg-primary text-white py-3">
                    <div class="d-flex justify-content-between align-items-center">s
                        <div>
                            <h5 class="mb-0">
                                <i class="fas fa-history me-2"></i>
                                Historial Reciente de Actividades
                            </h5>
                            <small class="opacity-75">ltimos movimientos en repuestos</small>
                        </div>
                        <span class="badge bg-white text-primary">
                            <i class="fas fa-clock me-1"></i>
                            {% now "H:i" %}
                        </span>
                    </div>
                </div>
                <div class="card-body p-0">
                    {% if ultimas_actividades %}
                    <div class="activity-timeline">
                        {% for actividad in ultimas_actividades %}
                        <div class="activity-item {% if not forloop.last %}border-bottom{% endif %}">
                            <div class="row g-0 align-items-center py-3 px-4">
                                <!-- Icono y color -->
                                <div class="col-auto">
                                    <div class="activity-icon">
                                        {% if actividad.tipo == 'entrada' %}
                                        <span class="badge bg-success rounded-circle p-2 d-flex align-items-center justify-content-center" 
                                              style="width: 40px; height: 40px;">
                                            <i class="fas fa-plus"></i>
                                        </span>
                                        {% elif actividad.tipo == 'salida' %}
                                        <span class="badge bg-danger rounded-circle p-2 d-flex align-items-center justify-content-center" 
                                              style="width: 40px; height: 40px;">
                                            <i class="fas fa-minus"></i>
                                        </span>
                                        {% elif actividad.tipo == 'creacion' %}
                                        <span class="badge bg-primary rounded-circle p-2 d-flex align-items-center justify-content-center" 
                                              style="width: 40px; height: 40px;">
                                            <i class="fas fa-plus-circle"></i>
                                        </span>
                                        {% elif actividad.tipo == 'actualizacion' %}
                                        <span class="badge bg-warning rounded-circle p-2 d-flex align-items-center justify-content-center" 
                                              style="width: 40px; height: 40px;">
                                            <i class="fas fa-edit"></i>
                                        </span>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Descripci贸n de la actividad -->
                                <div class="col">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h6 class="mb-1">
                                                {% if actividad.tipo == 'entrada' %}
                                                <span class="text-success"> Entrada de stock</span>
                                                {% elif actividad.tipo == 'salida' %}
                                                <span class="text-danger"> Salida de stock</span>
                                                {% elif actividad.tipo == 'creacion' %}
                                                <span class="text-primary"> Nuevo repuesto</span>
                                                {% elif actividad.tipo == 'actualizacion' %}
                                                <span class="text-warning">锔 Actualizaci贸n</span>
                                                {% endif %}
                                            </h6>
                                            <p class="mb-1 text-muted">
                                                <strong>{{ actividad.repuesto }}</strong>
                                                {% if actividad.tipo == 'entrada' %}
                                                - Se agregaron <span class="badge bg-success">{{ actividad.cantidad }}</span> unidades
                                                {% elif actividad.tipo == 'salida' %}
                                                - Se retiraron <span class="badge bg-danger">{{ actividad.cantidad }}</span> unidades
                                                {% elif actividad.tipo == 'creacion' %}
                                                - Nuevo registro con {{ actividad.cantidad }} unidades
                                                {% endif %}
                                                
                                                {% if actividad.stock_restante is not None %}
                                                <span class="ms-2">
                                                    Stock actual: <span class="badge bg-info">{{ actividad.stock_restante }}</span>
                                                </span>
                                                {% endif %}
                                            </p>
                                            {% if actividad.observaciones %}
                                            <small class="text-muted">
                                                <i class="fas fa-comment me-1"></i>
                                                {{ actividad.observaciones|truncatechars:60 }}
                                            </small>
                                            {% elif actividad.descripcion %}
                                            <small class="text-muted">
                                                {{ actividad.descripcion|truncatechars:60 }}
                                            </small>
                                            {% endif %}
                                        </div>
                                        
                                        <!-- Fecha -->
                                        <div class="text-end ms-3">
                                            <small class="text-muted d-block">
                                                <i class="far fa-clock me-1"></i>
                                                {{ actividad.fecha|timesince }} atr谩s
                                            </small>
                                            <small class="text-muted">
                                                {{ actividad.fecha|date:"d/m/Y H:i" }}
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-5">
                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No hay actividades registradas</h5>
                        <p class="text-muted">Las actividades aparecer谩n aqu铆 autom谩ticamente</p>
                    </div>
                    {% endif %}
                </div>
                <div class="card-footer bg-light py-3">
                    <div class="row">
                        <div class="col">
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                Mostrando {{ ultimas_actividades|length }} actividades recientes
                            </small>
                        </div>
                        <div class="col-auto">
                            <div class="btn-group btn-group-sm" role="group">
                                <button type="button" class="btn btn-outline-primary" id="refresh-activities">
                                    <i class="fas fa-sync-alt"></i> Actualizar
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#helpModal">
                                    <i class="fas fa-question-circle"></i> Ayuda
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ========== FIN PANEL HISTORIAL ========== -->

    <!-- Filtros -->
    <div class="card shadow mb-4">
        <div class="card-header bg-light">
            <h5 class="mb-0"><i class="fas fa-filter"></i> Filtros</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-8">
                    <div class="btn-group" role="group">
                        <a href="{% url 'lista_repuestos_balancin' %}" 
                           class="btn btn-outline-secondary {% if not stock_filtro %}active{% endif %}">
                            Todos
                        </a>
                        <a href="{% url 'lista_repuestos_balancin' %}?stock=bajo" 
                           class="btn btn-outline-warning {% if stock_filtro == 'bajo' %}active{% endif %}">
                            <i class="fas fa-exclamation-triangle"></i> Stock Bajo (<5)
                        </a>
                        <a href="{% url 'lista_repuestos_balancin' %}?stock=agotado" 
                           class="btn btn-outline-danger {% if stock_filtro == 'agotado' %}active{% endif %}">
                            <i class="fas fa-times-circle"></i> Sin Stock
                        </a>
                    </div>
                </div>
                <div class="col-md-4">
                    <form method="get" class="d-flex">
                        <input type="text" class="form-control me-2" placeholder="Buscar repuesto..." 
                               name="q" value="{{ request.GET.q|default:'' }}">
                        <button class="btn btn-outline-primary" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Lista de repuestos -->
    <div class="card shadow">
        <div class="card-header bg-light">
            <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="fas fa-list"></i> Lista de Repuestos
                    <span class="badge bg-primary ms-2">{{ repuestos|length }}</span>
                </h5>
                <div>
                    <a href="{% url 'agregar_repuesto_balancin' %}" class="btn btn-sm btn-primary">
                        <i class="fas fa-plus"></i> Agregar Nuevo
                    </a>
                </div>
            </div>
        </div>
        <div class="card-body">
            {% if repuestos %}
            <div class="table-responsive">
                <table class="table table-hover table-striped">
                    <thead class="table-light">
                        <tr>
                            <th>C贸digo</th>
                            <th>Descripci贸n</th>
                            <th>Cantidad</th>
                            <th>Ubicaci贸n</th>
                            <th>ltimo Movimiento</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for repuesto in repuestos %}
                        <tr>
                            <td>
                                <strong>{{ repuesto.item }}</strong>
                            </td>
                            <td>
                                {{ repuesto.descripcion|truncatechars:50 }}
                                {% if repuesto.observaciones %}
                                <small class="text-muted d-block">{{ repuesto.observaciones|truncatechars:30 }}</small>
                                {% endif %}
                            </td>
                            <td>
                                {% if repuesto.cantidad > 10 %}
                                <span class="badge bg-success fs-6">{{ repuesto.cantidad }}</span>
                                {% elif repuesto.cantidad > 0 %}
                                <span class="badge bg-warning text-dark fs-6">{{ repuesto.cantidad }}</span>
                                {% else %}
                                <span class="badge bg-danger fs-6">{{ repuesto.cantidad }}</span>
                                {% endif %}
                            </td>
                            <td>
                                {% if repuesto.ubicacion %}
                                <i class="fas fa-map-marker-alt text-muted"></i>
                                {{ repuesto.ubicacion|truncatechars:20 }}
                                {% else %}
                                <span class="text-muted">No especificada</span>
                                {% endif %}
                            </td>
                            <td>{{ repuesto.fecha_ultimo_movimiento|date:"d/m/Y" }}</td>
                            <td class="text-center">
                                <div class="btn-group btn-group-sm" role="group">
                                    <!-- Bot贸n Detalles (Modal) -->
                                    <button type="button" class="btn btn-outline-primary" 
                                            data-bs-toggle="modal" 
                                            data-bs-target="#detalleModal{{ repuesto.item|slugify }}"
                                            title="Ver detalles">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    
                                    <!-- Bot贸n Entrada Stock (Modal) -->
                                    <button type="button" class="btn btn-outline-success" 
                                            data-bs-toggle="modal"
                                            data-bs-target="#entradaModal{{ repuesto.item|slugify }}"
                                            title="Entrada de stock">
                                        <i class="fas fa-plus-circle"></i>
                                    </button>
                                    
                                    <!-- Bot贸n Salida Stock (Modal) -->
                                    <button type="button" class="btn btn-outline-danger"
                                            data-bs-toggle="modal"
                                            data-bs-target="#salidaModal{{ repuesto.item|slugify }}"
                                            title="Salida de stock">
                                        <i class="fas fa-minus-circle"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-5">
                <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No hay repuestos registrados</h4>
                <p class="text-muted mb-4">Comienza agregando el primer repuesto para balancines.</p>
                <a href="{% url 'agregar_repuesto_balancin' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-plus me-2"></i> Agregar Primer Repuesto
                </a>
            </div>
            {% endif %}
        </div>
        <div class="card-footer bg-light">
            <div class="row">
                <div class="col-md-6">
                    <small class="text-muted">
                        <i class="fas fa-info-circle"></i> Mostrando {{ repuestos|length }} repuestos
                    </small>
                </div>
                <div class="col-md-6 text-end">
                    <small class="text-muted">
                        <i class="fas fa-sync-alt"></i> Actualizado: {% now "d/m/Y H:i" %}
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ========== MODALES (FUERA DE LA TABLA) ========== -->
{% for repuesto in repuestos %}
<!-- Modal Detalles -->
<div class="modal fade" id="detalleModal{{ repuesto.item|slugify }}" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">
                    <i class="fas fa-info-circle"></i> {{ repuesto.item }}
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>C贸digo:</strong> {{ repuesto.item }}</p>
                        <p><strong>Descripci贸n:</strong> {{ repuesto.descripcion }}</p>
                        <p><strong>Cantidad:</strong> 
                            <span class="badge {% if repuesto.cantidad > 10 %}bg-success{% elif repuesto.cantidad > 0 %}bg-warning{% else %}bg-danger{% endif %}">
                                {{ repuesto.cantidad }}
                            </span>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Ubicaci贸n:</strong> {{ repuesto.ubicacion|default:"No especificada" }}</p>
                        <p><strong>Ingreso:</strong> {{ repuesto.fecha_ingreso|date:"d/m/Y H:i" }}</p>
                        <p><strong>ltimo movimiento:</strong> {{ repuesto.fecha_ultimo_movimiento|date:"d/m/Y H:i" }}</p>
                    </div>
                </div>
                {% if repuesto.observaciones %}
                <div class="mt-3">
                    <h6>Observaciones:</h6>
                    <p class="mb-0">{{ repuesto.observaciones }}</p>
                </div>
                {% endif %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Entrada de Stock -->
<div class="modal fade" id="entradaModal{{ repuesto.item|slugify }}" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">
                    <i class="fas fa-plus-circle"></i> Entrada de Stock
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form method="post" action="{% url 'entrada_stock_balancin' repuesto.item %}">
                {% csrf_token %}
                <div class="modal-body">
                    <p><strong>Repuesto:</strong> {{ repuesto.item }}</p>
                    <p><strong>Stock actual:</strong> {{ repuesto.cantidad }} unidades</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Cantidad a agregar:</label>
                        <input type="number" class="form-control" name="cantidad" 
                               min="1" value="1" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Observaciones:</label>
                        <textarea class="form-control" name="observaciones" 
                                  rows="2" placeholder="Motivo de la entrada..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-success">Registrar Entrada</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal Salida de Stock -->
<div class="modal fade" id="salidaModal{{ repuesto.item|slugify }}" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="fas fa-minus-circle"></i> Salida de Stock
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form method="post" action="{% url 'salida_stock_balancin' repuesto.item %}">
                {% csrf_token %}
                <div class="modal-body">
                    <p><strong>Repuesto:</strong> {{ repuesto.item }}</p>
                    <p><strong>Stock actual:</strong> {{ repuesto.cantidad }} unidades</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Cantidad a retirar:</label>
                        <input type="number" class="form-control" name="cantidad" 
                               min="1" max="{{ repuesto.cantidad }}" 
                               value="1" required>
                        <div class="form-text">M谩ximo disponible: {{ repuesto.cantidad }}</div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Observaciones:</label>
                        <textarea class="form-control" name="observaciones" 
                                  rows="2" placeholder="Motivo de la salida..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-danger">Registrar Salida</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}

<!-- Modal de ayuda para historial -->
<div class="modal fade" id="helpModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">
                    <i class="fas fa-question-circle me-2"></i>
                    Ayuda - Historial de Actividades
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <h6><span class="badge bg-success me-2"></span> Entrada de stock</h6>
                    <p class="small text-muted">Cuando se agregan unidades a un repuesto existente.</p>
                </div>
                <div class="mb-3">
                    <h6><span class="badge bg-danger me-2"></span> Salida de stock</h6>
                    <p class="small text-muted">Cuando se retiran unidades de un repuesto.</p>
                </div>
                <div class="mb-3">
                    <h6><span class="badge bg-primary me-2"></span> Nuevo repuesto</h6>
                    <p class="small text-muted">Cuando se registra un repuesto por primera vez.</p>
                </div>
                <div class="mb-3">
                    <h6><span class="badge bg-warning me-2">锔</span> Actualizaci贸n</h6>
                    <p class="small text-muted">Cuando se modifica la informaci贸n de un repuesto.</p>
                </div>
                <hr>
                <p class="small text-muted mb-0">
                    <i class="fas fa-info-circle me-1"></i>
                    El historial se actualiza autom谩ticamente con cada acci贸n en el sistema.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Estilos personalizados -->
<style>
/* Estilos generales */
.badge {
    font-weight: 500;
}
.table-hover tbody tr:hover {
    background-color: rgba(0, 123, 255, 0.05);
}
.card {
    border: none;
    border-radius: 10px;
}
.card-header {
    border-radius: 10px 10px 0 0 !important;
}
.btn-group .btn {
    border-radius: 5px !important;
    margin: 0 2px;
}
.modal-content {
    border-radius: 10px;
}
.btn-group-sm > .btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
}

/* Estilos espec铆ficos para el historial de actividades */
.activity-timeline {
    position: relative;
}

.activity-item {
    transition: all 0.3s ease;
    cursor: default;
}

.activity-item:hover {
    background-color: rgba(0, 123, 255, 0.05);
    transform: translateX(5px);
}

.activity-icon {
    position: relative;
}

.activity-icon .badge {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.activity-item:hover .activity-icon .badge {
    transform: scale(1.1);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

/* Colores personalizados para badges */
.bg-success {
    background-color: #28a745 !important;
}
.bg-danger {
    background-color: #dc3545 !important;
}
.bg-primary {
    background-color: #007bff !important;
}
.bg-warning {
    background-color: #ffc107 !important;
    color: #000 !important;
}
.bg-info {
    background-color: #17a2b8 !important;
}

/* Animaci贸n de actualizaci贸n */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.refreshing {
    animation: spin 1s linear infinite;
}

/* Estilo para texto de tiempo */
.text-muted small {
    font-size: 0.85rem;
}

/* Responsive */
@media (max-width: 768px) {
    .activity-item .row {
        flex-direction: column;
    }
    .activity-item .col-auto {
        margin-bottom: 10px;
    }
    .activity-item .text-end {
        text-align: left !important;
        margin-top: 5px;
    }
}
</style>

<!-- JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Bot贸n de actualizar actividades
    const refreshBtn = document.getElementById('refresh-activities');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', function() {
            const icon = this.querySelector('i');
            
            // Animaci贸n de carga
            icon.classList.add('fa-spin');
            this.disabled = true;
            this.innerHTML = '<i class="fas fa-sync-alt fa-spin me-1"></i> Actualizando...';
            
            // Recargar la p谩gina despu茅s de 1 segundo
            setTimeout(() => {
                location.reload();
            }, 1000);
        });
    }
    
    // Validar que no se retire m谩s del stock disponible en modales de salida
    document.querySelectorAll('form[action*="salida_stock"]').forEach(form => {
        const cantidadInput = form.querySelector('input[name="cantidad"]');
        const maxValue = parseInt(cantidadInput.getAttribute('max')) || 0;
        
        cantidadInput.addEventListener('change', function() {
            const value = parseInt(this.value) || 0;
            if (value > maxValue) {
                alert(`No puedes retirar m谩s de ${maxValue} unidades. Stock insuficiente.`);
                this.value = maxValue;
            }
            if (value < 1) {
                this.value = 1;
            }
        });
        
        cantidadInput.addEventListener('input', function() {
            const value = parseInt(this.value) || 0;
            if (value > maxValue) {
                this.value = maxValue;
            }
        });
    });
    
    // Auto-actualizaci贸n cada 2 minutos (opcional)
    let autoRefresh = false; // Cambiar a true si quieres auto-refresh
    
    if (autoRefresh) {
        setInterval(() => {
            const refreshBtn = document.getElementById('refresh-activities');
            if (refreshBtn && !refreshBtn.disabled) {
                refreshBtn.click();
            }
        }, 120000); // 2 minutos
    }
    
    // Tooltips para botones de acciones
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
    const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Efecto hover para actividades
    document.querySelectorAll('.activity-item').forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
        });
        
        item.addEventListener('mouseleave', function() {
            this.style.boxShadow = 'none';
        });
    });
});
</script>
{% endblock %}